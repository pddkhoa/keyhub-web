import{n as e,a$ as y,b0 as N,q as j,u as v,r as c,t as g,i as w,j as b,k as S,m as C,v as p,I as T,S as k,w as A,x as I,y as L,z as E,B as f,p as D,W as B,af as M,a3 as _}from"./index-ac8f03b4.js";import{H as h,B as R}from"./dayjs.min-9e620040.js";import{D as G}from"./delete-31c03665.js";import"./createClass-7094bdea.js";const q=({onDeleteItemTag:l,setDisplayModal:n,setDisplayCreate:r,setTag:o})=>[{title:e.jsx(h,{title:"#"}),dataIndex:"id",key:"id",width:50,render:a=>a},{title:e.jsx(h,{title:"Tags"}),dataIndex:"name",key:"name",width:200,render:a=>e.jsxs("div",{children:["#",a]})},{title:e.jsx(h,{title:"Category"}),dataIndex:"category",key:"category",width:200,render:a=>e.jsx("div",{children:a.name})},{title:e.jsx(h,{align:"center",title:"Action"}),dataIndex:"action",key:"action",width:200,render:(a,s)=>e.jsxs("div",{className:"flex items-center justify-center gap-3 ",children:[r&&n&&e.jsx(y,{size:"sm",content:()=>"Edit Invoice",placement:"top",className:"bg-gray-200 [&>svg]:fill-gray-100 ",color:"invert",children:e.jsx(N,{tag:"span",size:"sm",variant:"outline",className:"hover:brightness-150 cursor-pointer",onClick:()=>{r.on(),n("EDIT_TAG"),o(s),console.log(s)},children:e.jsx(z,{})})}),l&&e.jsx(G,{title:"Delete the invoice",description:`Are you sure you want to delete this #${s.id} invoice?`,onDelete:()=>l(s==null?void 0:s.id)})]})}];function z({strokeWidth:l,...n}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:l??1.5,stroke:"currentColor",...n,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})})}const F=({setFlag:l,setIsAdd:n})=>{var x;const{isLoading:r,sendRequest:o}=j(),a=v(t=>t.admin.listAllCategories),[s,u]=c.useState(a?a[0]:null);c.useEffect(()=>{o({type:g.ADMIN_GET_CATEGORIES})},[]);const i=w({initialValues:{name:"",categoryIds:""},validationSchema:b().shape({name:S().matches(C.noBlank).required("Required")}),validateOnChange:!0,onSubmit:async t=>{n(!1);const d={name:t.name,categoryIds:s==null?void 0:s.id};try{await o({type:g.ADMIN_ADD_TAG,data:d}),n(!0)}catch(m){console.log(m),n(!1)}l.off()}});return e.jsx("div",{className:"w-1/3 h-fit 2xl:w-xl sm:x-0  rounded-xl shadow bg-gray-900 overflow-y-scroll",children:e.jsxs("div",{className:"h-full flex flex-col space-y-3",children:[e.jsxs("div",{className:"px-5 py-2 flex space-x-5 shadow border-b-2 ",children:[e.jsx("span",{className:"text-lg grow text-title",children:"Add New Tag"}),e.jsx("button",{className:"block w-6 h-6 p-0.5 hover:text-white hover:bg-red-500 rounded-full text-gray-500 transition-colors",onClick:l.off,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-full h-full",children:e.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})})]}),e.jsx("div",{className:"px-8 grow overflow-y-auto p-2",children:e.jsx("form",{onSubmit:i.handleSubmit,children:e.jsxs("div",{className:"flex flex-col py-6 gap-8",children:[e.jsxs("div",{className:"relative ",children:[e.jsx(p,{htmlFor:"name",className:"text-md text-title-foreground",children:"Name"}),e.jsx(T,{id:"name",name:"name",placeholder:"Name Tag",onChange:i.handleChange,onBlur:i.handleBlur,value:i.values.name})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"gender",className:"text-sm text-title-foreground",children:"Categories"}),e.jsxs(k,{name:"categories",onValueChange:u,defaultValue:(x=s==null?void 0:s.id)==null?void 0:x.toString(),children:[e.jsx(A,{className:"w-full text-sm",children:e.jsx(I,{placeholder:"Categories"})}),e.jsx(L,{className:"h-52 overflow-y-scroll bg-gray-900 w-full",children:a&&(a==null?void 0:a.length)>0&&a.map(t=>{var d;return e.jsx(E,{value:(d=t==null?void 0:t.id)==null?void 0:d.toString(),children:t==null?void 0:t.name},t==null?void 0:t.id)})})]})]}),e.jsxs("div",{className:"px-5 py-2 border-t",children:[r?e.jsxs(f,{className:"px-5 py-1.5 float-right",disabled:!0,children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):e.jsx(f,{type:"submit",className:"px-5 py-1.5 float-right",disabled:i.isSubmitting||!i.isValid,children:"Save"}),e.jsx("button",{type:"button",onClick:l.off,className:"px-5 py-1.5  float-right text-base font-medium rounded text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Close"})]})]})})})]})})},W=()=>{const{isLoading:l,sendRequest:n}=j(),[r,o]=c.useState(!1),[a,s]=B(!1),[u,i]=c.useState(!1),[x,t]=c.useState(!1),d=v(m=>m.admin.listAllTags);return c.useEffect(()=>{t(!1),n({type:g.ADMIN_GET_TAGS})},[u,x]),e.jsxs("div",{className:"grid grid-cols-1 gap-6 pl-16 h-full 3xl:gap-8 shadow-2xl py-16 ",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{onClick:()=>{s.on(),o(!0)},variant:"gradient",className:"rounded-sm",children:"Add New Tag"})}),l?e.jsx("div",{children:e.jsx(M,{})}):e.jsx(e.Fragment,{children:e.jsx(R,{variant:"classic",title:"Classic Table",className:"opacity-90 text-white shadow-2xl",data:d,enableSearch:!0,enablePagination:!0,getColumns:q,setIsDelete:t,setIsAdd:i})}),e.jsx(_,{flag:a,closeModal:s.off,children:r?e.jsx(F,{setFlag:s,setIsAdd:i}):null})]})};export{W as default};
