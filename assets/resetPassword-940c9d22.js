import{r as i,n as e,D as R,q as k,A as q,u as A,h as F,i as z,j as B,k as b,m as L,s as T,t as _,v as u,I as f,C as n,B as j,p as H}from"./index-12e1c6d0.js";import{c as w,d as O,e as V}from"./index-d08fbdd1.js";import{X as r}from"./x-edb74591.js";const D=O,I=V,g=i.forwardRef(({className:d,align:c="center",sideOffset:m=4,...o},x)=>e.jsx(w,{ref:x,align:c,sideOffset:m,className:R("z-50 w-64 rounded-md text-title-foreground p-4  shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",d),...o}));g.displayName=w.displayName;const W=()=>{const{isLoading:d,sendRequest:c}=k(),m=q(),[o,x]=i.useState(),p=A(l=>l.auth.email),h=F(),[a,v]=i.useState({length:!1,lowercase:!1,uppercase:!1,number:!1,specialChar:!1,space:!1}),N=l=>{const t=l.target.value;s.setFieldValue("password",t);const y=/\s/.test(t),C=t.length>=8,P=/[a-z]/.test(t),$=/[A-Z]/.test(t),S=/[0-9]/.test(t),E=/[@#$%^_&+=]/.test(t);v({length:C,lowercase:P,uppercase:$,number:S,specialChar:E,space:y})};i.useEffect(()=>{if(!p){h("/login",{replace:!0});return}x(p)},[m,h,p]);const s=z({initialValues:{email:"",password:"",confirmPass:""},validationSchema:B().shape({password:b().matches(L.password,"Password invalid").required("required"),confirmPass:b().oneOf([T("password")],"Confirm password not match.").required("Confirm password is required.")}),validateOnChange:!0,onSubmit:async l=>{const t={email:o,old_pass:l.password,new_pass:l.confirmPass};c({type:_.RESETPASSWORD,data:t})}});return e.jsx("div",{className:"relative bg-gradient-to-b  from-gray-900 via-gray-900 to-[rgb(7,16,45)] bottom-0 leading-5 h-full overflow-hidden",children:e.jsx("div",{className:"relative h-screen w-full my-10  sm:flex sm:flex-row  justify-center bg-transparent",children:e.jsx("div",{className:"flex justify-center w-full self-center z-10",children:e.jsx("div",{className:"relative bg-card  brightness-150 border-2 border-border px-6 pt-10 pb-9 shadow-xl mx-auto w-full max-w-lg rounded-2xl",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-md flex-col space-y-5",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-center space-y-2",children:[e.jsx("div",{className:"font-semibold text-3xl text-title",children:e.jsx("p",{children:"Reset password"})}),e.jsx("div",{className:"flex flex-row text-sm font-medium text-gray-400",children:e.jsx("p",{children:"Fill up the form to reset the password"})})]}),e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(u,{htmlFor:"email",className:"text-sm text-title-foreground",children:"Email"}),e.jsx(f,{type:"text",id:"email",name:"email",value:o,disabled:!0,className:"w-full text-sm px-4 py-3 bg-input border  border-border rounded-lg"}),e.jsx("div",{className:"absolute inset-y-0 right-0 top-6 flex items-center pr-3 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{htmlFor:"password",className:"text-sm text-title-foreground",children:"Password"}),e.jsxs(D,{children:[e.jsx(I,{asChild:!0,children:e.jsx(f,{type:"password",id:"password",name:"password",onBlur:s.handleBlur,onChange:N,value:s.values.password,placeholder:"Password",className:"w-full bg-input border  border-border"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 top-6 flex items-center pr-3 pointer-events-none",children:s.errors.password&&s.touched.password?e.jsx(r,{className:"text-red-500"}):null}),e.jsx(g,{className:"my-2 relative w-80 p-6 bg-modal brightness-125 border-2 border-border rounded-2xl shadow-xl z-[60]",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:`text-sm flex justify-between border-b-2 items-center w-full ${a.length?"text-green-500":"text-red-500"}`,children:[e.jsx("span",{children:"At least 8 characters"}),a.length?e.jsx(n,{}):e.jsx(r,{})]}),e.jsxs("li",{className:`text-sm flex justify-between border-b-2 w-full ${a.lowercase?"text-green-500":"text-red-500"}`,children:[e.jsx("span",{children:"At least one lowercase letter"}),a.lowercase?e.jsx(n,{}):e.jsx(r,{})]}),e.jsxs("li",{className:`text-sm flex justify-between border-b-2 w-full ${a.uppercase?"text-green-500":"text-red-500"}`,children:[e.jsx("span",{children:"At least one uppercase letter"}),a.uppercase?e.jsx(n,{}):e.jsx(r,{})]}),e.jsxs("li",{className:`text-sm flex justify-between border-b-2 w-full ${a.number?"text-green-500":"text-red-500"}`,children:[e.jsx("span",{children:"At least one number"}),a.number?e.jsx(n,{}):e.jsx(r,{})]}),e.jsxs("li",{className:`text-sm flex justify-between border-b-2 w-full ${a.specialChar?"text-green-500":"text-red-500"}`,children:[e.jsx("span",{children:"At least one special character"}),a.specialChar?e.jsx(n,{}):e.jsx(r,{})]}),e.jsxs("li",{className:`text-sm flex justify-between border-b-2 w-full ${a.space?"text-red-500":"text-green-500"}`,children:[e.jsx("span",{children:"Password cannot contain spaces"}),a.space?e.jsx(r,{}):e.jsx(n,{})]})]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{htmlFor:"confirm-password",className:"text-sm text-title-foreground",children:"Confirm Password"}),e.jsx(f,{type:"password",id:"confirmPass",name:"confirmPass",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.confirmPass,placeholder:"Confirm Password",className:"w-full text-sm px-4 py-3 bg-input border  border-border rounded-lg"}),e.jsx("div",{className:"absolute inset-y-0 right-0 top-6 flex items-center pr-3 pointer-events-none",children:s.errors.confirmPass&&s.touched.confirmPass?e.jsx(r,{className:"text-red-500"}):null})]}),e.jsx("div",{className:"pt-5",children:d?e.jsxs(j,{className:"w-full",disabled:!0,children:[e.jsx(H,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):e.jsx(j,{type:"submit",className:"w-full",disabled:s.isSubmitting||!s.isValid,children:"Save"})})]})})]})})})})})};export{W as default};
