import{c as gr,ak as h,al as br,p as tn,u as te,h as j,o as nn,s as Ne,m,a4 as yr,ab as wr,W as xr,X as Er,Y as _r,Z as Sr,a0 as Cr,a1 as jr,T as kr,aa as rn}from"./index-fc9c8d04.js";function Nr(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const Or=gr("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var on={exports:{}},Ke={};h.crypto&&h.crypto.getRandomValues?Ke.randomBytes=function(e){var t=new Uint8Array(e);return h.crypto.getRandomValues(t),t}:Ke.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(Math.random()*256);return t};var $r=Ke,Ct="abcdefghijklmnopqrstuvwxyz012345",ne={string:function(e){for(var t=Ct.length,n=$r.randomBytes(e),r=[],i=0;i<e;i++)r.push(Ct.substr(n[i]%t,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}};(function(e){var t=ne,n={},r=!1,i=h.chrome&&h.chrome.app&&h.chrome.app.runtime;e.exports={attachEvent:function(a,u){typeof h.addEventListener<"u"?h.addEventListener(a,u,!1):h.document&&h.attachEvent&&(h.document.attachEvent("on"+a,u),h.attachEvent("on"+a,u))},detachEvent:function(a,u){typeof h.addEventListener<"u"?h.removeEventListener(a,u,!1):h.document&&h.detachEvent&&(h.document.detachEvent("on"+a,u),h.detachEvent("on"+a,u))},unloadAdd:function(a){if(i)return null;var u=t.string(8);return n[u]=a,r&&setTimeout(this.triggerUnloadCallbacks,0),u},unloadDel:function(a){a in n&&delete n[a]},triggerUnloadCallbacks:function(){for(var a in n)n[a](),delete n[a]}};var s=function(){r||(r=!0,e.exports.triggerUnloadCallbacks())};i||e.exports.attachEvent("unload",s)})(on);var z=on.exports,Tr=function(t,n){if(n=n.split(":")[0],t=+t,!t)return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},ut={},Ir=Object.prototype.hasOwnProperty,Rr;function jt(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function kt(e){try{return encodeURIComponent(e)}catch{return null}}function Ar(e){for(var t=/([^=?#&]+)=?([^&]*)/g,n={},r;r=t.exec(e);){var i=jt(r[1]),s=jt(r[2]);i===null||s===null||i in n||(n[i]=s)}return n}function Lr(e,t){t=t||"";var n=[],r,i;typeof t!="string"&&(t="?");for(i in e)if(Ir.call(e,i)){if(r=e[i],!r&&(r===null||r===Rr||isNaN(r))&&(r=""),i=kt(i),r=kt(r),i===null||r===null)continue;n.push(i+"="+r)}return n.length?t+n.join("&"):""}ut.stringify=Lr;ut.parse=Ar;var sn=Tr,$e=ut,Ur=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,an=/[\n\r\t]/g,Pr=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,ln=/:\d+$/,Mr=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Dr=/^[a-zA-Z]:/;function ft(e){return(e||"").toString().replace(Ur,"")}var Ye=[["#","hash"],["?","query"],function(t,n){return B(n.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Nt={hash:1,query:1};function cn(e){var t;typeof window<"u"?t=window:typeof h<"u"?t=h:typeof self<"u"?t=self:t={};var n=t.location||{};e=e||n;var r={},i=typeof e,s;if(e.protocol==="blob:")r=new q(unescape(e.pathname),{});else if(i==="string"){r=new q(e,{});for(s in Nt)delete r[s]}else if(i==="object"){for(s in e)s in Nt||(r[s]=e[s]);r.slashes===void 0&&(r.slashes=Pr.test(e.href))}return r}function B(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function un(e,t){e=ft(e),e=e.replace(an,""),t=t||{};var n=Mr.exec(e),r=n[1]?n[1].toLowerCase():"",i=!!n[2],s=!!n[3],a=0,u;return i?s?(u=n[2]+n[3]+n[4],a=n[2].length+n[3].length):(u=n[2]+n[4],a=n[2].length):s?(u=n[3]+n[4],a=n[3].length):u=n[4],r==="file:"?a>=2&&(u=u.slice(2)):B(r)?u=n[4]:r?i&&(u=u.slice(2)):a>=2&&B(t.protocol)&&(u=n[4]),{protocol:r,slashes:i||B(r),slashesCount:a,rest:u}}function Br(e,t){if(e==="")return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],s=!1,a=0;r--;)n[r]==="."?n.splice(r,1):n[r]===".."?(n.splice(r,1),a++):a&&(r===0&&(s=!0),n.splice(r,1),a--);return s&&n.unshift(""),(i==="."||i==="..")&&n.push(""),n.join("/")}function q(e,t,n){if(e=ft(e),e=e.replace(an,""),!(this instanceof q))return new q(e,t,n);var r,i,s,a,u,c,l=Ye.slice(),f=typeof t,o=this,d=0;for(f!=="object"&&f!=="string"&&(n=t,t=null),n&&typeof n!="function"&&(n=$e.parse),t=cn(t),i=un(e||"",t),r=!i.protocol&&!i.slashes,o.slashes=i.slashes||r&&t.slashes,o.protocol=i.protocol||t.protocol||"",e=i.rest,(i.protocol==="file:"&&(i.slashesCount!==2||Dr.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!B(o.protocol)))&&(l[3]=[/(.*)/,"pathname"]);d<l.length;d++){if(a=l[d],typeof a=="function"){e=a(e,o);continue}s=a[0],c=a[1],s!==s?o[c]=e:typeof s=="string"?(u=s==="@"?e.lastIndexOf(s):e.indexOf(s),~u&&(typeof a[2]=="number"?(o[c]=e.slice(0,u),e=e.slice(u+a[2])):(o[c]=e.slice(u),e=e.slice(0,u)))):(u=s.exec(e))&&(o[c]=u[1],e=e.slice(0,u.index)),o[c]=o[c]||r&&a[3]&&t[c]||"",a[4]&&(o[c]=o[c].toLowerCase())}n&&(o.query=n(o.query)),r&&t.slashes&&o.pathname.charAt(0)!=="/"&&(o.pathname!==""||t.pathname!=="")&&(o.pathname=Br(o.pathname,t.pathname)),o.pathname.charAt(0)!=="/"&&B(o.protocol)&&(o.pathname="/"+o.pathname),sn(o.port,o.protocol)||(o.host=o.hostname,o.port=""),o.username=o.password="",o.auth&&(u=o.auth.indexOf(":"),~u?(o.username=o.auth.slice(0,u),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=o.auth.slice(u+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(o.auth)),o.auth=o.password?o.username+":"+o.password:o.username),o.origin=o.protocol!=="file:"&&B(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString()}function Wr(e,t,n){var r=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(n||$e.parse)(t)),r[e]=t;break;case"port":r[e]=t,sn(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,ln.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var i=e==="pathname"?"/":"#";r[e]=t.charAt(0)!==i?i+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(r.username=t.slice(0,s),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(s+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<Ye.length;a++){var u=Ye[a];u[4]&&(r[u[1]]=r[u[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&B(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function qr(e){(!e||typeof e!="function")&&(e=$e.stringify);var t,n=this,r=n.host,i=n.protocol;i&&i.charAt(i.length-1)!==":"&&(i+=":");var s=i+(n.protocol&&n.slashes||B(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):n.protocol!=="file:"&&B(n.protocol)&&!r&&n.pathname!=="/"&&(s+="@"),(r[r.length-1]===":"||ln.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,t=typeof n.query=="object"?e(n.query):n.query,t&&(s+=t.charAt(0)!=="?"?"?"+t:t),n.hash&&(s+=n.hash),s}q.prototype={set:Wr,toString:qr};q.extractProtocol=un;q.location=cn;q.trimLeft=ft;q.qs=$e;var fn=q,Fr=fn,A={getOrigin:function(e){if(!e)return null;var t=new Fr(e);if(t.protocol==="file:")return null;var n=t.port;return n||(n=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},et={exports:{}};typeof Object.create=="function"?et.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:et.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var x=et.exports,O={};function Te(){this._listeners={}}Te.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];n.indexOf(t)===-1&&(n=n.concat([t])),this._listeners[e]=n};Te.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);if(r!==-1){n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e];return}}};Te.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],i=0;i<r.length;i++)r[i].apply(this,n)};var hn=Te,Xr=x,Ie=hn;function J(){Ie.call(this)}Xr(J,Ie);J.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}};J.prototype.once=function(e,t){var n=this,r=!1;function i(){n.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}this.on(e,i)};J.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var s=0;s<t.length;s++)t[s].apply(this,r)}};J.prototype.on=J.prototype.addListener=Ie.prototype.addEventListener;J.prototype.removeListener=Ie.prototype.removeEventListener;O.EventEmitter=J;var tt={exports:{}},Ot=h.WebSocket||h.MozWebSocket;Ot?tt.exports=function(t){return new Ot(t)}:tt.exports=void 0;var Hr=tt.exports,dn=z,Gr=A,Jr=x,pn=O.EventEmitter,mn=Hr,$t=function(){};function G(e,t,n){if(!G.enabled())throw new Error("Transport created when disabled");pn.call(this);var r=this,i=Gr.addPath(e,"/websocket");i.slice(0,5)==="https"?i="wss"+i.slice(5):i="ws"+i.slice(4),this.url=i,this.ws=new mn(this.url,[],n),this.ws.onmessage=function(s){$t("message event",s.data),r.emit("message",s.data)},this.unloadRef=dn.unloadAdd(function(){r.ws.close()}),this.ws.onclose=function(s){$t("close event",s.code,s.reason),r.emit("close",s.code,s.reason),r._cleanup()},this.ws.onerror=function(s){r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}Jr(G,pn);G.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)};G.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()};G.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),dn.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};G.enabled=function(){return!!mn};G.transportName="websocket";G.roundTrips=2;var zr=G,Vr=x,vn=O.EventEmitter,Qr=function(){};function Z(e,t){vn.call(this),this.sendBuffer=[],this.sender=t,this.url=e}Vr(Z,vn);Z.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()};Z.prototype.sendScheduleWait=function(){var e=this,t;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){e.sendStop=null,e.sendSchedule()},25)};Z.prototype.sendSchedule=function(){Qr("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(n){e.sendStop=null,n?(e.emit("close",n.code||1006,"Sending error: "+n),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}};Z.prototype._cleanup=function(){this.removeAllListeners()};Z.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var Zr=Z,Kr=x,gn=O.EventEmitter,Yr=function(){};function Re(e,t,n){gn.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}Kr(Re,gn);Re.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(n){e.emit("message",n)}),t.once("close",function(n,r){Yr("close",n,r,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||(r==="network"?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})};Re.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var ei=Re,ti=x,ni=A,ht=Zr,ri=ei;function dt(e,t,n,r,i){var s=ni.addPath(e,t),a=this;ht.call(this,e,n),this.poll=new ri(r,s,i),this.poll.on("message",function(u){a.emit("message",u)}),this.poll.once("close",function(u,c){a.poll=null,a.emit("close",u,c),a.close()})}ti(dt,ht);dt.prototype.close=function(){ht.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var bn=dt,ii=x,oi=A,yn=bn;function si(e){return function(t,n,r){var i={};typeof n=="string"&&(i.headers={"Content-type":"text/plain"});var s=oi.addPath(t,"/xhr_send"),a=new e("POST",s,n,i);return a.once("finish",function(u){if(a=null,u!==200&&u!==204)return r(new Error("http status "+u));r()}),function(){a.close(),a=null;var u=new Error("Aborted");u.code=1e3,r(u)}}}function wn(e,t,n,r){yn.call(this,e,t,si(r),n,r)}ii(wn,yn);var re=wn,ai=x,xn=O.EventEmitter;function de(e,t){xn.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(r,i){n._chunkHandler(r,i),n.xo=null;var s=r===200?"network":"permanent";n.emit("close",null,s),n._cleanup()})}ai(de,xn);de.prototype._chunkHandler=function(e,t){if(!(e!==200||!t))for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(n=r.indexOf(`
`),n===-1)break;var i=r.slice(0,n);i&&this.emit("message",i)}};de.prototype._cleanup=function(){this.removeAllListeners()};de.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var Ae=de,En=O.EventEmitter,li=x,_n=z,ci=A,ue=h.XMLHttpRequest,De=function(){};function F(e,t,n,r){var i=this;En.call(this),setTimeout(function(){i._start(e,t,n,r)},0)}li(F,En);F.prototype._start=function(e,t,n,r){var i=this;try{this.xhr=new ue}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}t=ci.addQuery(t,"t="+ +new Date),this.unloadRef=_n.unloadAdd(function(){i._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){De("xhr timeout"),i.emit("finish",0,""),i._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!r||!r.noCredentials)&&F.supportsCORS&&(this.xhr.withCredentials=!0),r&&r.headers)for(var s in r.headers)this.xhr.setRequestHeader(s,r.headers[s]);this.xhr.onreadystatechange=function(){if(i.xhr){var a=i.xhr,u,c;switch(De("readyState",a.readyState),a.readyState){case 3:try{c=a.status,u=a.responseText}catch{}c===1223&&(c=204),c===200&&u&&u.length>0&&i.emit("chunk",c,u);break;case 4:c=a.status,c===1223&&(c=204),(c===12005||c===12029)&&(c=0),De("finish",c,a.responseText),i.emit("finish",c,a.responseText),i._cleanup(!1);break}}};try{i.xhr.send(n)}catch{i.emit("finish",0,""),i._cleanup(!1)}};F.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),_n.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}};F.prototype.close=function(){this._cleanup(!0)};F.enabled=!!ue;var Tt=["Active"].concat("Object").join("X");!F.enabled&&Tt in h&&(ue=function(){try{return new h[Tt]("Microsoft.XMLHTTP")}catch{return null}},F.enabled=!!new ue);var Sn=!1;try{Sn="withCredentials"in new ue}catch{}F.supportsCORS=Sn;var Cn=F,ui=x,Oe=Cn;function pt(e,t,n,r){Oe.call(this,e,t,n,r)}ui(pt,Oe);pt.enabled=Oe.enabled&&Oe.supportsCORS;var Le=pt,fi=x,mt=Cn;function vt(e,t,n){mt.call(this,e,t,n,{noCredentials:!0})}fi(vt,mt);vt.enabled=mt.enabled;var pe=vt,me={isOpera:function(){return h.navigator&&/opera/i.test(h.navigator.userAgent)},isKonqueror:function(){return h.navigator&&/konqueror/i.test(h.navigator.userAgent)},hasDomain:function(){if(!h.document)return!0;try{return!!h.document.domain}catch{return!1}}},hi=x,jn=re,di=Ae,nt=Le,pi=pe,mi=me;function ie(e){if(!pi.enabled&&!nt.enabled)throw new Error("Transport created when disabled");jn.call(this,e,"/xhr_streaming",di,nt)}hi(ie,jn);ie.enabled=function(e){return e.nullOrigin||mi.isOpera()?!1:nt.enabled};ie.transportName="xhr-streaming";ie.roundTrips=2;ie.needBody=!!h.document;var vi=ie,kn=O.EventEmitter,gi=x,Nn=z,bi=me,yi=A,wi=function(){};function K(e,t,n){var r=this;kn.call(this),setTimeout(function(){r._start(e,t,n)},0)}gi(K,kn);K.prototype._start=function(e,t,n){var r=this,i=new h.XDomainRequest;t=yi.addQuery(t,"t="+ +new Date),i.onerror=function(){r._error()},i.ontimeout=function(){r._error()},i.onprogress=function(){wi("progress",i.responseText),r.emit("chunk",200,i.responseText)},i.onload=function(){r.emit("finish",200,i.responseText),r._cleanup(!1)},this.xdr=i,this.unloadRef=Nn.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch{this._error()}};K.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};K.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),Nn.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};K.prototype.close=function(){this._cleanup(!0)};K.enabled=!!(h.XDomainRequest&&bi.hasDomain());var gt=K,xi=x,On=re,Ei=Ae,rt=gt;function ve(e){if(!rt.enabled)throw new Error("Transport created when disabled");On.call(this,e,"/xhr_streaming",Ei,rt)}xi(ve,On);ve.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:rt.enabled&&e.sameScheme};ve.transportName="xdr-streaming";ve.roundTrips=2;var $n=ve,Tn=h.EventSource,_i=x,In=O.EventEmitter,Si=Tn,It=function(){};function ge(e){In.call(this);var t=this,n=this.es=new Si(e);n.onmessage=function(r){It("message",r.data),t.emit("message",decodeURI(r.data))},n.onerror=function(r){It("error",n.readyState);var i=n.readyState!==2?"network":"permanent";t._cleanup(),t._close(i)}}_i(ge,In);ge.prototype.abort=function(){this._cleanup(),this._close("user")};ge.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)};ge.prototype._close=function(e){var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)};var Ci=ge,ji=x,Rn=re,ki=Ci,Ni=Le,Oi=Tn;function oe(e){if(!oe.enabled())throw new Error("Transport created when disabled");Rn.call(this,e,"/eventsource",ki,Ni)}ji(oe,Rn);oe.enabled=function(){return!!Oi};oe.transportName="eventsource";oe.roundTrips=2;var Rt=oe,Be,At;function An(){return At||(At=1,Be="1.6.1"),Be}var We={exports:{}},Lt;function be(){return Lt||(Lt=1,function(e){var t=z,n=me;e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in h||(h[e.exports.WPrefix]={})},postMessage:function(r,i){h.parent!==h&&h.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:r,data:i||""}),"*")},createIframe:function(r,i){var s=h.document.createElement("iframe"),a,u,c=function(){clearTimeout(a);try{s.onload=null}catch{}s.onerror=null},l=function(){s&&(c(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),t.unloadDel(u))},f=function(d){s&&(l(),i(d))},o=function(d,p){setTimeout(function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(d,p)}catch{}},0)};return s.src=r,s.style.display="none",s.style.position="absolute",s.onerror=function(){f("onerror")},s.onload=function(){clearTimeout(a),a=setTimeout(function(){f("onload timeout")},2e3)},h.document.body.appendChild(s),a=setTimeout(function(){f("timeout")},15e3),u=t.unloadAdd(l),{post:o,cleanup:l,loaded:c}},createHtmlfile:function(r,i){var s=["Active"].concat("Object").join("X"),a=new h[s]("htmlfile"),u,c,l,f=function(){clearTimeout(u),l.onerror=null},o=function(){a&&(f(),t.unloadDel(c),l.parentNode.removeChild(l),l=a=null,CollectGarbage())},d=function(E){a&&(o(),i(E))},p=function(E,v){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(E,v)},0)}catch{}};a.open(),a.write('<html><script>document.domain="'+h.document.domain+'";<\/script></html>'),a.close(),a.parentWindow[e.exports.WPrefix]=h[e.exports.WPrefix];var b=a.createElement("div");return a.body.appendChild(b),l=a.createElement("iframe"),b.appendChild(l),l.src=r,l.onerror=function(){d("onerror")},u=setTimeout(function(){d("timeout")},15e3),c=t.unloadAdd(o),{post:p,cleanup:o,loaded:f}}},e.exports.iframeEnabled=!1,h.document&&(e.exports.iframeEnabled=(typeof h.postMessage=="function"||typeof h.postMessage=="object")&&!n.isKonqueror())}(We)),We.exports}var $i=x,Ln=O.EventEmitter,Ti=An(),it=A,Un=be(),Pn=z,Ii=ne,se=function(){};function X(e,t,n){if(!X.enabled())throw new Error("Transport created when disabled");Ln.call(this);var r=this;this.origin=it.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=Ii.string(8);var i=it.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=Un.createIframe(i,function(s){r.emit("close",1006,"Unable to load an iframe ("+s+")"),r.close()}),this.onmessageCallback=this._message.bind(this),Pn.attachEvent("message",this.onmessageCallback)}$i(X,Ln);X.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){Pn.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};X.prototype._message=function(e){if(se("message",e.data),!it.isOriginEqual(e.origin,this.origin)){se("not same origin",e.origin,this.origin);return}var t;try{t=JSON.parse(e.data)}catch{se("bad json",e.data);return}if(t.windowId!==this.windowId){se("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([Ti,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch{se("bad json",t.data);return}this.emit("close",n[0],n[1]),this.close();break}};X.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)};X.prototype.send=function(e){this.postMessage("m",e)};X.enabled=function(){return Un.iframeEnabled};X.transportName="iframe";X.roundTrips=2;var Mn=X,bt={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}},Ri=x,Se=Mn,Ai=bt,qe=function(e){function t(n,r){Se.call(this,e.transportName,n,r)}return Ri(t,Se),t.enabled=function(n,r){if(!h.document)return!1;var i=Ai.extend({},r);return i.sameOrigin=!0,e.enabled(i)&&Se.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=Se.roundTrips+e.roundTrips-1,t.facadeTransport=e,t},Li=x,Q=be(),Ui=A,Dn=O.EventEmitter,Pi=ne,Mi=function(){};function P(e){Dn.call(this);var t=this;Q.polluteGlobalNamespace(),this.id="a"+Pi.string(6),e=Ui.addQuery(e,"c="+decodeURIComponent(Q.WPrefix+"."+this.id)),Mi("using htmlfile",P.htmlfileEnabled);var n=P.htmlfileEnabled?Q.createHtmlfile:Q.createIframe;h[Q.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(r){t.emit("message",r)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=n(e,function(){t._cleanup(),t._close("permanent")})}Li(P,Dn);P.prototype.abort=function(){this._cleanup(),this._close("user")};P.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete h[Q.WPrefix][this.id]};P.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()};P.htmlfileEnabled=!1;var Ut=["Active"].concat("Object").join("X");if(Ut in h)try{P.htmlfileEnabled=!!new h[Ut]("htmlfile")}catch{}P.enabled=P.htmlfileEnabled||Q.iframeEnabled;var Di=P,Bi=x,ot=Di,Wi=pe,Bn=re;function ye(e){if(!ot.enabled)throw new Error("Transport created when disabled");Bn.call(this,e,"/htmlfile",ot,Wi)}Bi(ye,Bn);ye.enabled=function(e){return ot.enabled&&e.sameOrigin};ye.transportName="htmlfile";ye.roundTrips=2;var Pt=ye,qi=x,Wn=re,Fi=Ae,st=Le,qn=pe;function we(e){if(!qn.enabled&&!st.enabled)throw new Error("Transport created when disabled");Wn.call(this,e,"/xhr",Fi,st)}qi(we,Wn);we.enabled=function(e){return e.nullOrigin?!1:qn.enabled&&e.sameOrigin?!0:st.enabled};we.transportName="xhr-polling";we.roundTrips=2;var Mt=we,Xi=x,Fn=re,Hi=$n,Gi=Ae,Dt=gt;function xe(e){if(!Dt.enabled)throw new Error("Transport created when disabled");Fn.call(this,e,"/xhr",Gi,Dt)}Xi(xe,Fn);xe.enabled=Hi.enabled;xe.transportName="xdr-polling";xe.roundTrips=2;var Ji=xe,le=be(),Xn=ne,zi=me,Vi=A,Qi=x,Hn=O.EventEmitter,Zi=function(){};function R(e){var t=this;Hn.call(this),le.polluteGlobalNamespace(),this.id="a"+Xn.string(6);var n=Vi.addQuery(e,"c="+encodeURIComponent(le.WPrefix+"."+this.id));h[le.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout(function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))},R.timeout)}Qi(R,Hn);R.prototype.abort=function(){if(h[le.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}};R.timeout=35e3;R.scriptErrorTimeout=1e3;R.prototype._callback=function(e){this._cleanup(),!this.aborting&&(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())};R.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()};R.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete h[le.WPrefix][this.id]};R.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},R.scriptErrorTimeout))};R.prototype._createScript=function(e){var t=this,n=this.script=h.document.createElement("script"),r;if(n.id="a"+Xn.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){t._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(Zi("onreadystatechange",n.readyState),/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){t.loadedOkay=!0;try{n.onclick()}catch{}}n&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof n.async>"u"&&h.document.attachEvent)if(zi.isOpera())r=this.script2=h.document.createElement("script"),r.text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=r.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch{}n.async=!0}typeof n.async<"u"&&(n.async=!0);var i=h.document.getElementsByTagName("head")[0];i.insertBefore(n,i.firstChild),r&&i.insertBefore(r,i.firstChild)};var Ki=R,Yi=ne,Bt=A,eo=function(){},$,ce;function to(e){try{return h.document.createElement('<iframe name="'+e+'">')}catch{var t=h.document.createElement("iframe");return t.name=e,t}}function no(){$=h.document.createElement("form"),$.style.display="none",$.style.position="absolute",$.method="POST",$.enctype="application/x-www-form-urlencoded",$.acceptCharset="UTF-8",ce=h.document.createElement("textarea"),ce.name="d",$.appendChild(ce),h.document.body.appendChild($)}var ro=function(e,t,n){$||no();var r="a"+Yi.string(8);$.target=r,$.action=Bt.addQuery(Bt.addPath(e,"/jsonp_send"),"i="+r);var i=to(r);i.id=r,i.style.display="none",$.appendChild(i);try{ce.value=t}catch{}$.submit();var s=function(a){i.onerror&&(i.onreadystatechange=i.onerror=i.onload=null,setTimeout(function(){i.parentNode.removeChild(i),i=null},500),ce.value="",n(a))};return i.onerror=function(){s()},i.onload=function(){s()},i.onreadystatechange=function(a){eo("onreadystatechange",r,i.readyState),i.readyState==="complete"&&s()},function(){s(new Error("Aborted"))}},io=x,Gn=bn,oo=Ki,so=ro;function Y(e){if(!Y.enabled())throw new Error("Transport created when disabled");Gn.call(this,e,"/jsonp",so,oo)}io(Y,Gn);Y.enabled=function(){return!!h.document};Y.transportName="jsonp-polling";Y.roundTrips=1;Y.needBody=!0;var ao=Y,lo=[zr,vi,$n,Rt,qe(Rt),Pt,qe(Pt),Mt,Ji,qe(Mt),ao],fe=Array.prototype,yt=Object.prototype,co=Function.prototype,he=String.prototype,Fe=fe.slice,wt=yt.toString,Jn=function(e){return yt.toString.call(e)==="[object Function]"},uo=function(t){return wt.call(t)==="[object Array]"},zn=function(t){return wt.call(t)==="[object String]"},fo=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),at;fo?at=function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:at=function(e,t,n,r){!r&&t in e||(e[t]=n)};var Ee=function(e,t,n){for(var r in t)yt.hasOwnProperty.call(t,r)&&at(e,r,t[r],n)},Vn=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)};function ho(e){var t=+e;return t!==t?t=0:t!==0&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function po(e){return e>>>0}function Xe(){}Ee(co,{bind:function(t){var n=this;if(!Jn(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r=Fe.call(arguments,1),i=function(){if(this instanceof c){var l=n.apply(this,r.concat(Fe.call(arguments)));return Object(l)===l?l:this}else return n.apply(t,r.concat(Fe.call(arguments)))},s=Math.max(0,n.length-r.length),a=[],u=0;u<s;u++)a.push("$"+u);var c=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(i);return n.prototype&&(Xe.prototype=n.prototype,c.prototype=new Xe,Xe.prototype=null),c}});Ee(Array,{isArray:uo});var Wt=Object("a"),Qn=Wt[0]!=="a"||!(0 in Wt),mo=function(t){var n=!0,r=!0;return t&&(t.call("foo",function(i,s,a){typeof a!="object"&&(n=!1)}),t.call([1],function(){r=typeof this=="string"},"x")),!!t&&n&&r};Ee(fe,{forEach:function(t){var n=Vn(this),r=Qn&&zn(this)?this.split(""):n,i=arguments[1],s=-1,a=r.length>>>0;if(!Jn(t))throw new TypeError;for(;++s<a;)s in r&&t.call(i,r[s],s,n)}},!mo(fe.forEach));var vo=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;Ee(fe,{indexOf:function(t){var n=Qn&&zn(this)?this.split(""):Vn(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=ho(arguments[1])),i=i>=0?i:Math.max(0,r+i);i<r;i++)if(i in n&&n[i]===t)return i;return-1}},vo);var qt=he.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=/()??/.exec("")[1]===void 0;he.split=function(t,n){var r=this;if(t===void 0&&n===0)return[];if(wt.call(t)!=="[object RegExp]")return qt.call(this,t,n);var i=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),a=0,u,c,l,f;for(t=new RegExp(t.source,s+"g"),r+="",e||(u=new RegExp("^"+t.source+"$(?!\\s)",s)),n=n===void 0?-1>>>0:po(n);(c=t.exec(r))&&(l=c.index+c[0].length,!(l>a&&(i.push(r.slice(a,c.index)),!e&&c.length>1&&c[0].replace(u,function(){for(var o=1;o<arguments.length-2;o++)arguments[o]===void 0&&(c[o]=void 0)}),c.length>1&&c.index<r.length&&fe.push.apply(i,c.slice(1)),f=c[0].length,a=l,i.length>=n)));)t.lastIndex===c.index&&t.lastIndex++;return a===r.length?(f||!t.test(""))&&i.push(""):i.push(r.slice(a)),i.length>n?i.slice(0,n):i}}():"0".split(void 0,0).length&&(he.split=function(t,n){return t===void 0&&n===0?[]:qt.call(this,t,n)});var go=he.substr,bo="".substr&&"0b".substr(-1)!=="b";Ee(he,{substr:function(t,n){return go.call(this,t<0&&(t=this.length+t)<0?0:t,n)}},bo);var Ce=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,He,yo=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(i){return n[i]="\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n},wo={quote:function(e){var t=JSON.stringify(e);return Ce.lastIndex=0,Ce.test(t)?(He||(He=yo(Ce)),t.replace(Ce,function(n){return He[n]})):t}},Ge=function(){},xo=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(i){if(i&&!(i.transportName==="websocket"&&n.websocket===!1)){if(t.length&&t.indexOf(i.transportName)===-1){Ge("not in whitelist",i.transportName);return}i.enabled(n)?(Ge("enabled",i.transportName),r.main.push(i),i.facadeTransport&&r.facade.push(i.facadeTransport)):Ge("disabled",i.transportName)}}),r}}},lt={};["log","debug","warn"].forEach(function(e){var t;try{t=h.console&&h.console[e]&&h.console[e].apply}catch{}lt[e]=t?function(){return h.console[e].apply(h.console,arguments)}:e==="log"?function(){}:lt.log});var Eo=lt;function ee(e){this.type=e}ee.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this};ee.prototype.stopPropagation=function(){};ee.prototype.preventDefault=function(){};ee.CAPTURING_PHASE=1;ee.AT_TARGET=2;ee.BUBBLING_PHASE=3;var xt=ee,Zn=h.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""},_o=x,Kn=xt;function Yn(){Kn.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}_o(Yn,Kn);var So=Yn,Co=x,er=xt;function tr(e){er.call(this),this.initEvent("message",!1,!1),this.data=e}Co(tr,er);var jo=tr,nr=O.EventEmitter,ko=x;function _e(){var e=this;nr.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},_e.timeout)}ko(_e,nr);_e.prototype.close=function(){clearTimeout(this.to)};_e.timeout=2e3;var No=_e,rr=O.EventEmitter,Oo=x,$o=bt;function Et(e,t){rr.call(this);var n=this,r=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(i,s){var a,u;if(i===200){if(u=+new Date-r,s)try{a=JSON.parse(s)}catch{}$o.isObject(a)||(a={})}n.emit("finish",a,u),n.removeAllListeners()})}Oo(Et,rr);Et.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var ir=Et,To=x,or=O.EventEmitter,Io=pe,Ro=ir;function Ue(e){var t=this;or.call(this),this.ir=new Ro(e,Io),this.ir.once("finish",function(n,r){t.ir=null,t.emit("message",JSON.stringify([n,r]))})}To(Ue,or);Ue.transportName="iframe-info-receiver";Ue.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};var sr=Ue,ar=O.EventEmitter,Ao=x,Lo=z,lr=Mn,Uo=sr;function Pe(e,t){var n=this;ar.call(this);var r=function(){var i=n.ifr=new lr(Uo.transportName,t,e);i.once("message",function(s){if(s){var a;try{a=JSON.parse(s)}catch{n.emit("finish"),n.close();return}var u=a[0],c=a[1];n.emit("finish",u,c)}n.close()}),i.once("close",function(){n.emit("finish"),n.close()})};h.document.body?r():Lo.attachEvent("load",r)}Ao(Pe,ar);Pe.enabled=function(){return lr.enabled()};Pe.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var Po=Pe,cr=O.EventEmitter,Mo=x,Do=A,Ft=gt,Xt=Le,Bo=pe,Wo=No,Ht=Po,je=ir;function H(e,t){var n=this;cr.call(this),setTimeout(function(){n.doXhr(e,t)},0)}Mo(H,cr);H._getReceiver=function(e,t,n){return n.sameOrigin?new je(t,Bo):Xt.enabled?new je(t,Xt):Ft.enabled&&n.sameScheme?new je(t,Ft):Ht.enabled()?new Ht(e,t):new je(t,Wo)};H.prototype.doXhr=function(e,t){var n=this,r=Do.addPath(e,"/info");this.xo=H._getReceiver(e,r,t),this.timeoutRef=setTimeout(function(){n._cleanup(!1),n.emit("finish")},H.timeout),this.xo.once("finish",function(i,s){n._cleanup(!0),n.emit("finish",i,s)})};H.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null};H.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)};H.timeout=8e3;var qo=H,Je,Gt;function Fo(){if(Gt)return Je;Gt=1;var e=be();function t(n){this._transport=n,n.on("message",this._transportMessage.bind(this)),n.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(n,r){e.postMessage("c",JSON.stringify([n,r]))},t.prototype._transportMessage=function(n){e.postMessage("t",n)},t.prototype._send=function(n){this._transport.send(n)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},Je=t,Je}var ze,Jt;function Xo(){if(Jt)return ze;Jt=1;var e=A,t=z,n=Fo(),r=sr,i=be(),s=Zn,a=function(){};return ze=function(u,c){var l={};c.forEach(function(o){o.facadeTransport&&(l[o.facadeTransport.transportName]=o.facadeTransport)}),l[r.transportName]=r;var f;u.bootstrap_iframe=function(){var o;i.currentWindowId=s.hash.slice(1);var d=function(p){if(p.source===parent&&(typeof f>"u"&&(f=p.origin),p.origin===f)){var b;try{b=JSON.parse(p.data)}catch{a("bad json",p.data);return}if(b.windowId===i.currentWindowId)switch(b.type){case"s":var E;try{E=JSON.parse(b.data)}catch{a("bad json",b.data);break}var v=E[0],_=E[1],S=E[2],y=E[3];if(v!==u.version)throw new Error('Incompatible SockJS! Main site uses: "'+v+'", the iframe: "'+u.version+'".');if(!e.isOriginEqual(S,s.href)||!e.isOriginEqual(y,s.href))throw new Error("Can't connect to different domain from within an iframe. ("+s.href+", "+S+", "+y+")");o=new n(new l[_](S,y));break;case"m":o._send(b.data);break;case"c":o&&o._close(),o=null;break}}};t.attachEvent("message",d),i.postMessage("s")}},ze}var Ho=fn,Go=x,zt=ne,Jo=wo,ae=A,zo=z,Vo=xo,Qo=bt,Zo=me,Ko=Eo,_t=xt,ur=hn,ke=Zn,Yo=So,Vt=jo,es=qo,W=function(){},fr;function w(e,t,n){if(!(this instanceof w))return new w(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");ur.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&Ko.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if(typeof r=="function")this._generateSessionId=r;else if(typeof r=="number")this._generateSessionId=function(){return zt.string(r)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=n.server||zt.numberString(1e3);var i=new Ho(e);if(!i.host||!i.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(i.hash)throw new SyntaxError("The URL must not contain a fragment");if(i.protocol!=="http:"&&i.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+i.protocol+"' is not allowed.");var s=i.protocol==="https:";if(ke.protocol==="https:"&&!s&&!ae.isLoopbackAddr(i.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var a=t.sort();a.forEach(function(c,l){if(!c)throw new SyntaxError("The protocols entry '"+c+"' is invalid.");if(l<a.length-1&&c===a[l+1])throw new SyntaxError("The protocols entry '"+c+"' is duplicated.")});var u=ae.getOrigin(ke.href);this._origin=u?u.toLowerCase():null,i.set("pathname",i.pathname.replace(/\/+$/,"")),this.url=i.href,W("using url",this.url),this._urlInfo={nullOrigin:!Zo.hasDomain(),sameOrigin:ae.isOriginEqual(this.url,ke.href),sameScheme:ae.isSchemeEqual(this.url,ke.href)},this._ir=new es(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}Go(w,ur);function hr(e){return e===1e3||e>=3e3&&e<=4999}w.prototype.close=function(e,t){if(e&&!hr(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===w.CLOSING||this.readyState===w.CLOSED)){var n=!0;this._close(e||1e3,t||"Normal closure",n)}};w.prototype.send=function(e){if(typeof e!="string"&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(Jo.quote(e))};w.version=An();w.CONNECTING=0;w.OPEN=1;w.CLOSING=2;w.CLOSED=3;w.prototype._receiveInfo=function(e,t){if(this._ir=null,!e){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=Qo.extend(e,this._urlInfo);var n=fr.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,W(this._transports.length+" enabled transports"),this._connect()};w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(W("attempt",e.transportName),e.needBody&&(!h.document.body||typeof h.document.readyState<"u"&&h.document.readyState!=="complete"&&h.document.readyState!=="interactive")){this._transports.unshift(e),zo.attachEvent("load",this._connect.bind(this));return}var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var n=ae.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),r=this._transportOptions[e.transportName],i=new e(n,this._transUrl,r);i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,this._transport=i;return}this._close(2e3,"All transports failed",!1)};w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};w.prototype._transportMessage=function(e){var t=this,n=e.slice(0,1),r=e.slice(1),i;switch(n){case"o":this._open();return;case"h":this.dispatchEvent(new _t("heartbeat")),W("heartbeat",this.transport);return}if(r)try{i=JSON.parse(r)}catch{}if(!(typeof i>"u"))switch(n){case"a":Array.isArray(i)&&i.forEach(function(s){W("message",t.transport),t.dispatchEvent(new Vt(s))});break;case"m":W("message",this.transport),this.dispatchEvent(new Vt(i));break;case"c":Array.isArray(i)&&i.length===2&&this._close(i[0],i[1],!0);break}};w.prototype._transportClose=function(e,t){if(W("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!hr(e)&&e!==2e3&&this.readyState===w.CONNECTING){this._connect();return}this._close(e,t)};w.prototype._open=function(){W("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new _t("open")),W("connected",this.transport)):this._close(1006,"Server lost session")};w.prototype._close=function(e,t,n){W("_close",this.transport,e,t,n,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout((function(){this.readyState=w.CLOSED,r&&this.dispatchEvent(new _t("error"));var i=new Yo;i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)};w.prototype.countRTO=function(e){return e>100?4*e:300+e};var ts=function(e){return fr=Vo(e),Xo()(w,e),w},ns=lo,dr=ts(ns);"_sockjs_onload"in h&&setTimeout(h._sockjs_onload,1);const rs=br(dr),is=Nr({__proto__:null,default:rs},[dr]);var Me={exports:{}},St={};(function(e){(function(){var t,n,r,i,s={}.hasOwnProperty,a=[].slice;t={LF:`
`,NULL:"\0"},r=function(){var u;function c(l,f,o){this.command=l,this.headers=f??{},this.body=o??""}return c.prototype.toString=function(){var l,f,o,d,p;l=[this.command],o=this.headers["content-length"]===!1,o&&delete this.headers["content-length"],p=this.headers;for(f in p)s.call(p,f)&&(d=p[f],l.push(""+f+":"+d));return this.body&&!o&&l.push("content-length:"+c.sizeOfUTF8(this.body)),l.push(t.LF+this.body),l.join(t.LF)},c.sizeOfUTF8=function(l){return l?encodeURI(l).match(/%..|./g).length:0},u=function(l){var f,o,d,p,b,E,v,_,S,y,N,L,U,T,M,D,C;for(p=l.search(RegExp(""+t.LF+t.LF)),b=l.substring(0,p).split(t.LF),d=b.shift(),E={},L=function(g){return g.replace(/^\s+|\s+$/g,"")},D=b.reverse(),U=0,M=D.length;U<M;U++)y=D[U],_=y.indexOf(":"),E[L(y.substring(0,_))]=L(y.substring(_+1));if(f="",N=p+2,E["content-length"])S=parseInt(E["content-length"]),f=(""+l).substring(N,N+S);else for(o=null,v=T=N,C=l.length;(N<=C?T<C:T>C)&&(o=l.charAt(v),o!==t.NULL);v=N<=C?++T:--T)f+=o;return new c(d,E,f)},c.unmarshall=function(l){var f;return function(){var o,d,p,b;for(p=l.split(RegExp(""+t.NULL+t.LF+"*")),b=[],o=0,d=p.length;o<d;o++)f=p[o],(f!=null?f.length:void 0)>0&&b.push(u(f));return b}()},c.marshall=function(l,f,o){var d;return d=new c(l,f,o),d.toString()+t.NULL},c}(),n=function(){var u;function c(l){this.ws=l,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16*1024,this.subscriptions={}}return c.prototype.debug=function(l){var f;return typeof window<"u"&&window!==null&&(f=window.console)!=null?f.log(l):void 0},u=function(){return Date.now?Date.now():new Date().valueOf},c.prototype._transmit=function(l,f,o){var d;for(d=r.marshall(l,f,o),typeof this.debug=="function"&&this.debug(">>> "+d);;)if(d.length>this.maxWebSocketFrameSize)this.ws.send(d.substring(0,this.maxWebSocketFrameSize)),d=d.substring(this.maxWebSocketFrameSize),typeof this.debug=="function"&&this.debug("remaining = "+d.length);else return this.ws.send(d)},c.prototype._setupHeartbeat=function(l){var f,o,d,p,b,E;if(!((b=l.version)!==i.VERSIONS.V1_1&&b!==i.VERSIONS.V1_2)&&(E=function(){var v,_,S,y;for(S=l["heart-beat"].split(","),y=[],v=0,_=S.length;v<_;v++)p=S[v],y.push(parseInt(p));return y}(),o=E[0],f=E[1],this.heartbeat.outgoing===0||f===0||(d=Math.max(this.heartbeat.outgoing,f),typeof this.debug=="function"&&this.debug("send PING every "+d+"ms"),this.pinger=i.setInterval(d,function(v){return function(){return v.ws.send(t.LF),typeof v.debug=="function"?v.debug(">>> PING"):void 0}}(this))),!(this.heartbeat.incoming===0||o===0)))return d=Math.max(this.heartbeat.incoming,o),typeof this.debug=="function"&&this.debug("check PONG every "+d+"ms"),this.ponger=i.setInterval(d,function(v){return function(){var _;if(_=u()-v.serverActivity,_>d*2)return typeof v.debug=="function"&&v.debug("did not receive server activity for the last "+_+"ms"),v.ws.close()}}(this))},c.prototype._parseConnect=function(){var l,f,o,d;switch(l=1<=arguments.length?a.call(arguments,0):[],d={},l.length){case 2:d=l[0],f=l[1];break;case 3:l[1]instanceof Function?(d=l[0],f=l[1],o=l[2]):(d.login=l[0],d.passcode=l[1],f=l[2]);break;case 4:d.login=l[0],d.passcode=l[1],f=l[2],o=l[3];break;default:d.login=l[0],d.passcode=l[1],f=l[2],o=l[3],d.host=l[4]}return[d,f,o]},c.prototype.connect=function(){var l,f,o,d;return l=1<=arguments.length?a.call(arguments,0):[],d=this._parseConnect.apply(this,l),o=d[0],this.connectCallback=d[1],f=d[2],typeof this.debug=="function"&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(p){return function(b){var E,v,_,S,y,N,L,U,T,M,D,C;if(S=typeof ArrayBuffer<"u"&&b.data instanceof ArrayBuffer?(E=new Uint8Array(b.data),typeof p.debug=="function"&&p.debug("--- got data length: "+E.length),function(){var g,I,V;for(V=[],g=0,I=E.length;g<I;g++)v=E[g],V.push(String.fromCharCode(v));return V}().join("")):b.data,p.serverActivity=u(),S===t.LF){typeof p.debug=="function"&&p.debug("<<< PONG");return}for(typeof p.debug=="function"&&p.debug("<<< "+S),D=r.unmarshall(S),C=[],T=0,M=D.length;T<M;T++)switch(y=D[T],y.command){case"CONNECTED":typeof p.debug=="function"&&p.debug("connected to server "+y.headers.server),p.connected=!0,p._setupHeartbeat(y.headers),C.push(typeof p.connectCallback=="function"?p.connectCallback(y):void 0);break;case"MESSAGE":U=y.headers.subscription,L=p.subscriptions[U]||p.onreceive,L?(_=p,N=y.headers["message-id"],y.ack=function(g){return g==null&&(g={}),_.ack(N,U,g)},y.nack=function(g){return g==null&&(g={}),_.nack(N,U,g)},C.push(L(y))):C.push(typeof p.debug=="function"?p.debug("Unhandled received MESSAGE: "+y):void 0);break;case"RECEIPT":C.push(typeof p.onreceipt=="function"?p.onreceipt(y):void 0);break;case"ERROR":C.push(typeof f=="function"?f(y):void 0);break;default:C.push(typeof p.debug=="function"?p.debug("Unhandled frame: "+y):void 0)}return C}}(this),this.ws.onclose=function(p){return function(){var b;return b="Whoops! Lost connection to "+p.ws.url,typeof p.debug=="function"&&p.debug(b),p._cleanUp(),typeof f=="function"?f(b):void 0}}(this),this.ws.onopen=function(p){return function(){return typeof p.debug=="function"&&p.debug("Web Socket Opened..."),o["accept-version"]=i.VERSIONS.supportedVersions(),o["heart-beat"]=[p.heartbeat.outgoing,p.heartbeat.incoming].join(","),p._transmit("CONNECT",o)}}(this)},c.prototype.disconnect=function(l,f){return f==null&&(f={}),this._transmit("DISCONNECT",f),this.ws.onclose=null,this.ws.close(),this._cleanUp(),typeof l=="function"?l():void 0},c.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&i.clearInterval(this.pinger),this.ponger)return i.clearInterval(this.ponger)},c.prototype.send=function(l,f,o){return f==null&&(f={}),o==null&&(o=""),f.destination=l,this._transmit("SEND",f,o)},c.prototype.subscribe=function(l,f,o){var d;return o==null&&(o={}),o.id||(o.id="sub-"+this.counter++),o.destination=l,this.subscriptions[o.id]=f,this._transmit("SUBSCRIBE",o),d=this,{id:o.id,unsubscribe:function(){return d.unsubscribe(o.id)}}},c.prototype.unsubscribe=function(l){return delete this.subscriptions[l],this._transmit("UNSUBSCRIBE",{id:l})},c.prototype.begin=function(l){var f,o;return o=l||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:o}),f=this,{id:o,commit:function(){return f.commit(o)},abort:function(){return f.abort(o)}}},c.prototype.commit=function(l){return this._transmit("COMMIT",{transaction:l})},c.prototype.abort=function(l){return this._transmit("ABORT",{transaction:l})},c.prototype.ack=function(l,f,o){return o==null&&(o={}),o["message-id"]=l,o.subscription=f,this._transmit("ACK",o)},c.prototype.nack=function(l,f,o){return o==null&&(o={}),o["message-id"]=l,o.subscription=f,this._transmit("NACK",o)},c}(),i={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(u,c){var l,f;return c==null&&(c=["v10.stomp","v11.stomp"]),l=i.WebSocketClass||WebSocket,f=new l(u,c),new n(f)},over:function(u){return new n(u)},Frame:r},e!==null&&(e.Stomp=i),typeof window<"u"&&window!==null?(i.setInterval=function(u,c){return window.setInterval(c,u)},i.clearInterval=function(u){return window.clearInterval(u)},window.Stomp=i):e||(self.Stomp=i)}).call(h)})(St);var ct={},Qt={},Zt;function pr(){if(Zt)return Qt;Zt=1;var e=pr();for(k in e)h[k]=e[k];return Qt}var Ve,Kt;function os(){if(Kt)return Ve;Kt=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Ve=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}(),Ve}const ss="websocket",as="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",ls=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],cs="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",us=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],fs="1.0.34",hs={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},ds="https://github.com/theturtle32/WebSocket-Node",ps={node:">=4.0.0"},ms={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},vs={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},gs={verbose:!1},bs={test:"tape test/unit/*.js",gulp:"gulp"},ys="index",ws={lib:"./lib"},xs="lib/browser.js",Es="Apache-2.0",_s={name:ss,description:as,keywords:ls,author:cs,contributors:us,version:fs,repository:hs,homepage:ds,engines:ps,dependencies:ms,devDependencies:vs,config:gs,scripts:bs,main:ys,directories:ws,browser:xs,license:Es};var Qe,Yt;function Ss(){return Yt||(Yt=1,Qe=_s.version),Qe}var Ze,en;function Cs(){if(en)return Ze;en=1;var e;if(typeof globalThis=="object")e=globalThis;else try{e=os()}catch{}finally{if(!e&&typeof window<"u"&&(e=window),!e)throw new Error("Could not determine global this")}var t=e.WebSocket||e.MozWebSocket,n=Ss();function r(i,s){var a;return s?a=new t(i,s):a=new t(i),a}return t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(i){Object.defineProperty(r,i,{get:function(){return t[i]}})}),Ze={w3cwebsocket:t?r:null,version:n},Ze}(function(){var e,t,n,r,i,s;e=St,t=pr(),e.Stomp.setInterval=function(a,u){return setInterval(u,a)},e.Stomp.clearInterval=function(a){return clearInterval(a)},i=function(a,u){var c,l;return c=null,l={url:"tcp:// "+u+":"+a,send:function(f){return c.write(f)},close:function(){return c.end()}},c=t.connect(a,u,function(f){return l.onopen()}),c.on("error",function(f){return typeof l.onclose=="function"?l.onclose(f):void 0}),c.on("close",function(f){return typeof l.onclose=="function"?l.onclose(f):void 0}),c.on("data",function(f){var o;return o={data:f.toString()},l.onmessage(o)}),l},s=function(a){var u,c,l,f;return u=Cs().client,c=null,f={url:a,send:function(o){return c.sendUTF(o)},close:function(){return c.close()}},l=new u,l.on("connect",function(o){return c=o,f.onopen(),c.on("error",function(d){return typeof f.onclose=="function"?f.onclose(d):void 0}),c.on("close",function(){return typeof f.onclose=="function"?f.onclose():void 0}),c.on("message",function(d){var p;if(d.type==="utf8")return p={data:d.utf8Data},f.onmessage(p)})}),l.connect(a),f},n=function(a,u){var c;return c=i(u,a),e.Stomp.over(c)},r=function(a){var u;return u=s(a),e.Stomp.over(u)},ct.overTCP=n,ct.overWS=r}).call(h);var js=St,mr=ct;Me.exports=js.Stomp;Me.exports.overTCP=mr.overTCP;Me.exports.overWS=mr.overWS;var ks=Me.exports;const Ns=({chatId:e,userYou:t})=>{var D,C;const{isLoading:n,sendRequest:r}=tn(),i=te(g=>g.auth.login.data.token),[s,a]=j.useState(""),u=nn(i),c=(C=(D=u==null?void 0:u.userDetails)==null?void 0:D.users)==null?void 0:C.id,l=te(g=>g.auth.login.data.token),[f,o]=j.useState(!1),[d,p]=j.useState(!1),[b,E]=j.useState([]),[v,_]=j.useState(),S=te(g=>{var I;return(I=g==null?void 0:g.chat)==null?void 0:I.getChatMessages});j.useEffect(()=>{p(!1),e&&r({type:Ne.GET_LIST_CHAT_MESSAGES,slug:e})},[e,d]);const y=async()=>{s.trim()!==""&&(e?(v==null||v.send(`/topic/${e}`,{},JSON.stringify({chat_id:e,content:s})),await r({type:Ne.SEND_MESSAGES,data:{chat_id:e,content:s}}),a("")):console.error("WebSocket connection is not established yet"))},N=()=>{const g=new is("http://localhost:8081/api/ws"),I=ks.over(g);_(I);const V={Authorization:`Bearer ${l}`};I.connect(V,U,L)};j.useEffect(()=>{N()},[]);const L=g=>{console.log("no error",g)},U=()=>{o(!0)};j.useEffect(()=>{if(f&&v&&e&&c){const g=v==null?void 0:v.subscribe(`/topic/${e}`,I=>{const V=JSON.parse(I==null?void 0:I.body);E(vr=>[...vr,V])});return()=>{g.unsubscribe()}}}),j.useEffect(()=>{e&&E(S)},[S,e]);const T=async g=>{p(!1),await r({type:Ne.DELETE_CHAT,slug:g}),p(!0)},M=j.useRef(null);return j.useEffect(()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)},[b]),m.jsx("div",{className:"flex flex-col flex-auto h-full w-full p-6 mr-24",children:m.jsxs("div",{className:"flex flex-col flex-auto flex-shrink-0 rounded-2xl bg-gray-800 dark:bg-white/90 h-full w-full p-4",children:[m.jsx("div",{ref:M,className:"flex flex-col h-full overflow-x-hidden mb-4",children:m.jsx("div",{className:"flex flex-col h-full w-full",children:m.jsx("div",{className:"grid grid-cols-12 gap-y-2 w-full",children:n?m.jsxs("div",{role:"status",className:"absolute left-1/2 top-1/2 justify-center",children:[m.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),m.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),m.jsx("span",{className:"sr-only",children:"Loading..."})]}):b&&e&&(b==null?void 0:b.length)>0?b.map(g=>(g==null?void 0:g.user_create)===c?m.jsx(Os,{data:g,onClick:()=>{T(g.id)}},g.id):m.jsx($s,{data:g,userYou:t},g.id)):m.jsx("div",{className:"col-span-12",children:m.jsx(yr,{})})})})}),m.jsxs("div",{className:"flex flex-row items-center h-16 rounded-xl bg-gray-900  w-full px-4",children:[m.jsx("div",{className:"flex-grow ml-4",children:m.jsxs("div",{className:"relative w-full",children:[m.jsx("input",{disabled:!e,type:"text",value:s,onChange:g=>a(g.target.value),className:"flex w-full border rounded-xl bg-gray-800 focus:outline-none text-white pl-4 h-10"}),m.jsx("button",{className:"absolute flex items-center justify-center h-full w-12 right-0 top-0 text-gray-400 hover:text-gray-600",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),m.jsx("div",{className:"ml-4",children:m.jsxs("button",{disabled:!e,onClick:y,className:"flex items-center justify-center bg-indigo-500 hover:bg-indigo-600 rounded-xl text-white px-4 py-1 flex-shrink-0",children:[m.jsx("span",{children:"Send"}),m.jsx("span",{className:"ml-2",children:m.jsx("svg",{className:"w-4 h-4 transform rotate-45 -mt-px",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})})},Os=({data:e,onClick:t})=>{const n=()=>{t()};return m.jsx("div",{className:"col-start-6 col-end-13 p-3 rounded-lg",children:m.jsxs("div",{className:"flex items-center justify-start flex-row-reverse",children:[m.jsx(wr,{size:45}),m.jsx("div",{className:"relative mr-3 text-sm bg-indigo-100 py-2 px-4 shadow rounded-xl",children:m.jsx("div",{children:e==null?void 0:e.content})}),m.jsxs(xr,{children:[m.jsx(Er,{asChild:!0,children:m.jsx("div",{className:"inline-flex cursor-pointer  mr-4 items-center text-white justify-center rounded-xl hover:bg-slate-800 p-0.5 ",children:m.jsx(Or,{})})}),m.jsxs(_r,{className:"w-56",children:[m.jsx(Sr,{children:"Option"}),m.jsx(Cr,{}),m.jsxs(jr,{onClick:n,className:"cursor-pointer h-12",children:[m.jsx(kr,{className:"w-6 h-6 mr-2"}),m.jsx("span",{children:"Delete"})]})]})]})]})})},$s=({data:e,userYou:t})=>{var n;return m.jsx("div",{className:"col-start-1 col-end-8 p-3 rounded-lg",children:m.jsx("div",{className:"flex justify-between w-full",children:m.jsxs("div",{className:"flex flex-row  items-center",children:[m.jsx(rn,{size:45,data:(n=t==null?void 0:t.avatar)==null?void 0:n.toString()}),m.jsx("div",{className:"relative ml-3 text-sm bg-white py-2 px-4 shadow rounded-xl",children:m.jsx("div",{children:e==null?void 0:e.content})})]})})})},Ts=({setChatId:e,setUserYou:t})=>{var b,E;const{isLoading:n,sendRequest:r}=tn(),i=te(v=>v.chat.getListChat),s=te(v=>v.auth.login.data.token),a=nn(s),u=(E=(b=a==null?void 0:a.userDetails)==null?void 0:b.users)==null?void 0:E.id,[c,l]=j.useState([]),f=te(v=>v.chat.newMessages);j.useEffect(()=>{r({type:Ne.GET_LIST_CHAT})},[f,n]),j.useEffect(()=>{(()=>{if(i&&i.length>0){const _=i.map(S=>{const y=u,N=S.users.filter(L=>L.id!==y);return{...S,users:N}});l(_)}})()},[i]);const[o,d]=j.useState(null),p=v=>{d(_=>_===v?null:v)};return m.jsx("div",{className:"flex flex-col  pl-6 pr-2 w-80 h-full flex-shrink-0",children:m.jsxs("div",{className:"flex flex-col py-4 mt-6 bg-gray-800 dark:bg-white/90 p-4 rounded-lg h-full",children:[m.jsx("div",{className:"flex flex-row items-center justify-between text-xs",children:m.jsx("span",{className:"font-bold text-md text-gray-200 dark:text-black",children:"Active Conversations"})}),m.jsx("div",{className:"flex flex-col space-y-1 mt-4 -mx-2 h-full overflow-y-auto",children:c&&(c==null?void 0:c.length)>0?c.map(v=>{var _,S;return m.jsx(Is,{idMess:v.id,data:v==null?void 0:v.users[0],isActive:o===((S=(_=v==null?void 0:v.users[0])==null?void 0:_.id)==null?void 0:S.toString()),onClick:()=>{var y;e(v==null?void 0:v.id.toString()),t(v==null?void 0:v.users[0]),p((y=v==null?void 0:v.users[0].id)==null?void 0:y.toString())}},v.id)}):m.jsx("div",{children:"No data"})})]})})},Is=({data:e,onClick:t,isActive:n})=>{var i;const r=()=>{t()};return m.jsxs("button",{onClick:r,className:`flex flex-row items-center hover:bg-gray-700 dark:hover:bg-gray-400 rounded-xl p-2 ${n?"bg-slate-700":""}`,children:[m.jsx("div",{className:"flex items-center justify-center  bg-indigo-200 rounded-full",children:m.jsx(rn,{size:40,data:(i=e==null?void 0:e.avatar)==null?void 0:i.toString()})}),m.jsx("div",{className:"ml-2 w-full flex justify-between items-center text-sm font-semibold text-gray-200 dark:text-black",children:m.jsx("span",{children:e==null?void 0:e.name})})]})},As=()=>{const[e,t]=j.useState(),[n,r]=j.useState();return m.jsx("div",{className:"flex h-screen w-full antialiased text-gray-800 pt-10 fixed",children:m.jsxs("div",{className:"flex flex-row  h-full w-full overflow-x-hidden overflow-y-hidden",children:[m.jsx(Ts,{setChatId:t,setUserYou:r}),m.jsx(Ns,{chatId:e,userYou:n})]})})};export{As as default};
